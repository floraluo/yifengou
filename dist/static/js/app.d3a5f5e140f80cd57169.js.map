{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?9e0f","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/store/mutations.js","webpack:///./src/share.js","webpack:///./src/main.js","webpack:///./src/config/request.js","webpack:///./src/module/login.js"],"names":["App","name","methods","initView","_this","this","console","log","$get","then","res","data","code","list","JSON","parse","text","$store","commit","bannerTopList","invite","shareImage","login","setInitData","catch","mounted","init","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","$route","meta","_e","_v","keepAlive","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","Vue","use","Router","router","routes","path","component","Promise","all","e","bind","Vuex","store","Store","state","cartCount","scrollTop","indexList","ruleList","bindList","shareImg","mutations","addCartCount","count","addTextList","index_list","rule_list","bind_list","addBanner","bannerList","addInvite","addShareImg","img","share","get","wx","chars","timestamp","Math","floor","Date","getTime","nonceStr","n","i","ceil","random","generateMixed","url","location","href","split","appId","signature","config","debug","jsApiList","error","ready","imgurl","onMenuShareTimeline","title","desc","link","imgUrl","success","cancel","onMenuShareAppMessage","type","dataUrl","onMenuShareQQ","VueAwesomeSwiper","infiniteScroll","Toast","prototype","$post","post","get2","productionTip","el","components","template","BASE_URL","process","_userid","Cookie","_timestamp","_token","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","resolve","reject","axios","qs","stringify","headers","Content-Type","params","getQueryString","reg","RegExp","r","window","search","substr","match","unescape","channel","initData","__webpack_exports__","set","userid","expires","token","b","checkInitData","func","setTimeout"],"mappings":"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","file":"static/js/app.d3a5f5e140f80cd57169.js","sourcesContent":["<template>\n  <div id=\"app\">\n    <keep-alive>\n      <router-view v-if=\"$route.meta.keepAlive\"></router-view>\n    </keep-alive>\n\n    <router-view v-if=\"!$route.meta.keepAlive\"></router-view>\n  </div>\n</template>\n\n<script>\n\n  import login from './module/login'\n\n  export default {\n    name: 'App',\n    methods:{ \n      // 页面初始化\n    initView(){ \n      console.log('-------111')\n      this.$get('/init').then(res=>{\n        console.log('init',res)\n        if (res.data.code === 200) {\n          // 序列化规则列表\n          let list = JSON.parse(res.data.data.text)\n          // 提交规则列表到vuex\n          this.$store.commit('addTextList',list)\n\n          // 提交bannerTopList到vuex\n          this.$store.commit('addBanner',res.data.data.bannerTopList)\n\n          // 提交邀请码到vuex\n          let invite = res.data.data.invite\n          this.$store.commit('addInvite',invite)\n\n          // 提交分享图片到vuex\n          this.$store.commit('addShareImg',res.data.data.shareImage)\n\n          // 判断是否有邀请码，没有的话跳转输入邀请码页面\n          console.log('App::',invite)\n          login.setInitData(1);\n          // if (!invite) {\n          //   this.$router.push('/invite')\n          // } else {\n          //   this.$router.push('/')\n          // }\n        }else{\n          login.setInitData(0);\n        }\n      }).catch(()=>{\n        login.setInitData(0);\n      })\n    },\n    },\n    mounted() {\n      login.init();\n      this.initView()\n    }\n  }\n</script>\n\n<style>\n  body {\n    margin: 0;\n    background: #ec4e4f;\n  }\n  .router-link-exact-active{\n    color: #ec4e4f !important;\n  }\n\n  #app {\n    font-family: 'Avenir', Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('keep-alive',[(_vm.$route.meta.keepAlive)?_c('router-view'):_vm._e()],1),_vm._v(\" \"),(!_vm.$route.meta.keepAlive)?_c('router-view'):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-da864498\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-da864498\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-da864498\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Home',\n      meta: {  \n        keepAlive:true // 标记这个路由，加上缓存\n      },\n      component: () => import('@/pages/home/index')\n    },\n    {\n      path: '/rule',\n      name: 'Rule',\n      component: () => import('@/pages/rule/index')\n    },\n    {\n      path: '/order',\n      name: 'Rule',\n      component: () => import('@/pages/order/index')\n    },\n    {\n      path: '/refund',\n      name: 'Rule',\n      component: () => import('@/pages/refund/index')\n    },\n    {\n      path: '/cart',\n      name: 'Cart',\n      component: () => import('@/pages/cart/index')\n    },\n    {\n      path:'/invite',\n      name: 'Invite',\n      component: () => import('@/pages/invite/index')\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import Vuex from 'vuex'\nimport Vue from 'vue'\nimport mutations from './mutations'\nVue.use(Vuex)\n\nlet state = {\n    cartCount:0,  // 购物车数量\n    scrollTop:0,  // 首页的页面滚距离\n    indexList:[], // 首页（商品）页的规则说明\n    ruleList:[], // 规则页面的说明\n    bindList:[], // 返现（绑定）页面规则\n    bannerTopList:[], // bannerTopList列表,初始值为空数组\n    invite: null, // 邀请码\n    shareImg:''\n}\nexport default new Vuex.Store({\n    state,\n    mutations\n})\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","export default {\n  // 添加购物车\n  addCartCount(state,count) {\n    state.cartCount = count;\n  },\n\n  // saveScrollTop(state,scroll) {\n  //     state.scrollTop = scroll;\n  // }\n\n  // 添加规则\n  addTextList(state,list){\n    state.indexList = list.index_list\n    state.ruleList = list.rule_list\n    state.bindList = list.bind_list\n  },\n\n  // 添加顶部banner\n  addBanner(state,bannerList){\n    state.bannerTopList = bannerList\n  }, \n\n  // 添加邀请码\n  addInvite(state,invite){\n      state.invite = invite\n  },\n\n  // 添加分享图片\n  addShareImg(state,img){\n    state.shareImg = img\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","let share = (get, wx, shareImg) => {\n  // share.js改写版\n  var chars = [\n    \"0\",\n    \"1\",\n    \"2\",\n    \"3\",\n    \"4\",\n    \"5\",\n    \"6\",\n    \"7\",\n    \"8\",\n    \"9\",\n    \"A\",\n    \"B\",\n    \"C\",\n    \"D\",\n    \"E\",\n    \"F\",\n    \"G\",\n    \"H\",\n    \"I\",\n    \"J\",\n    \"K\",\n    \"L\",\n    \"M\",\n    \"N\",\n    \"O\",\n    \"P\",\n    \"Q\",\n    \"R\",\n    \"S\",\n    \"T\",\n    \"U\",\n    \"V\",\n    \"W\",\n    \"X\",\n    \"Y\",\n    \"Z\"\n  ];\n\n  function generateMixed(n) {\n    var res = \"\";\n    for (var i = 0; i < n; i++) {\n      var id = Math.ceil(Math.random() * 35);\n      res += chars[id];\n    }\n    return res;\n  }\n  var timestamp = Math.floor(new Date().getTime() / 1000);\n  var nonceStr = generateMixed(16);\n  var url = \"http://buy.51zhuanfan.com\";\n\n  get(\"http://47.96.17.80:9400/h5/wx/config\", {\n    timestamp,\n    nonceStr,\n    url: location.href.split(\"#\")[0]\n  }).then(res => {\n    // console.log(\"测试分享api\", res);\n    var appId = res.data.data.appId;\n    var signature = res.data.data.signature;\n    wx.config({\n      debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，\n      // 若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n      appId: appId + \"\", // 必填，公众号的唯一标识\n      timestamp: timestamp + \"\", // 必填，生成签名的时间戳\n      nonceStr: nonceStr + \"\", // 必填，生成签名的随机串\n      signature: signature + \"\", // 必填，签名，见附录1\n      jsApiList: [\n        \"onMenuShareTimeline\",\n        \"onMenuShareAppMessage\",\n        \"onMenuShareQQ\"\n      ]\n      // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\n    });\n    wx.error(function(res) {\n      // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\n      console.log(\"验证失败：\", res);\n    });\n    wx.ready(function() {\n      var imgurl = shareImg;\n      var title = \"点我优惠购\";\n      var desc = \"双十一嗨翻\";\n      wx.onMenuShareTimeline({\n        title: title, // 分享标题\n        desc: desc, // 分享描述\n        link: url, // 分享链接\n        imgUrl: imgurl, // 分享图标\n        success: function() {\n          // 用户确认分享后执行的回调函数\n        },\n        cancel: function() {\n          // 用户取消分享后执行的回调函数\n        }\n      });\n\n      wx.onMenuShareAppMessage({\n        title: title, // 分享标题\n        desc: desc, // 分享描述\n        link: url, // 分享链接\n        imgUrl: imgurl, // 分享图标\n        type: \"link\", // 分享类型,music、video或link，不填默认为link\n        dataUrl: \"\", // 如果type是music或video，则要提供数据链接，默认为空\n        success: function() {\n          // 用户确认分享后执行的回调函数\n        },\n        cancel: function() {\n          // 用户取消分享后执行的回调函数\n        }\n      });\n\n      wx.onMenuShareQQ({\n        title: title, // 分享标题\n        desc: desc, // 分享描述\n        link: url, // 分享链接\n        imgUrl: imgurl, // 分享图标\n        success: function() {\n          // 用户确认分享后执行的回调函数\n        },\n        cancel: function() {\n          // 用户取消分享后执行的回调函数\n        }\n      });\n    });\n  });\n};\n\nexport default share;\n\n\n\n// WEBPACK FOOTER //\n// ./src/share.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport store from '@/store/index'\nimport wx from \"weixin-js-sdk\";\nimport share from './share'\nimport infiniteScroll from 'vue-infinite-scroll'\nimport {get, get2, post} from './config/request'\nimport VueAwesomeSwiper from 'vue-awesome-swiper'\nimport 'swiper/dist/css/swiper.css'\nimport '@/assets/iconfont/iconfont.css'\nimport 'vue2-toast/lib/toast.css';\nimport Toast from 'vue2-toast';\nVue.use(VueAwesomeSwiper)\nVue.use(infiniteScroll)\nVue.use(Toast);\n\nVue.prototype.$get = get\nVue.prototype.$post = post\n\n// 下面三个为分享所用\nVue.prototype.get2 = get2\nVue.prototype.wx = wx\nVue.prototype.share = share\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import axios from \"axios\";\nimport qs from \"qs\";\nimport Cookie from \"js-cookie\";\n// axios.defaults.crossDomain = true;\n// axios.defaults.withCredentials  = true;\nlet BASE_URL = process.env.BASE_URL;\n\n\n// post方法\nlet post = (url, data) => {\n  data = data || {};\n  // 获取本地cookie\n  let _userid = Cookie.get(\"buy_h5_userid\");\n  let _timestamp = Cookie.get(\"buy_h5_timestamp\");\n  let _token = Cookie.get(\"buy_h5_token\");\n\n  // 如果cookie存在，带入data中\n  if (_userid && _timestamp && _token) {\n    data[\"_userid\"] = _userid;\n    data[\"_timestamp\"] = _timestamp;\n    data[\"_token\"] = _token;\n  }\n  data[\"_h5\"] = 1;\n  return new Promise((resolve, reject) => {\n    axios\n      .post(BASE_URL + url, qs.stringify(data), {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      })\n      .then(res => {\n        resolve(res);\n      })\n      .catch(error => {\n        reject(error);\n      });\n  });\n};\n\n// get方法\nlet get = (url, params) => {\n  params = params || {};\n  // 获取本地cookie\n  let _userid = Cookie.get(\"buy_h5_userid\");\n  let _timestamp = Cookie.get(\"buy_h5_timestamp\");\n  let _token = Cookie.get(\"buy_h5_token\");\n\n  // 如果cookie存在，带入data中\n  if (_userid && _timestamp && _token) {\n    params[\"_userid\"] = _userid;\n    params[\"_timestamp\"] = _timestamp;\n    params[\"_token\"] = _token;\n  }\n  params[\"_h5\"] = 1;\n\n  return new Promise((resolve, reject) => {\n    axios\n      .get(BASE_URL + url, { params })\n      .then(res => {\n        resolve(res);\n      })\n      .catch(error => {\n        reject(error);\n      });\n  });\n};\n\n\n//  不带base_url的get方法\nlet get2 = (url, params) => {\n  params[\"_h5\"] = 1;\n  return new Promise((resolve,reject)=>{\n    axios\n    .get(url,{params})\n    .then(res=>{\n      resolve(res)\n    })\n    .catch(error=>{\n      reject(error)\n    })\n  })\n}\nexport { post, get, get2 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/request.js","import {get,post} from '../config/request'\nimport Cookie from 'js-cookie'\n\nfunction getQueryString(name) {\n  var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\n  var r = window.location.search.substr(1).match(reg);\n  if (r != null) return unescape(r[2]);\n  return '';\n}\n\nvar channel = getQueryString('c');\nvar code = getQueryString('code');\n\nvar url = \"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf9fbb515384aa6c0\"\n  + \"&redirect_uri=http%3A%2F%2Fbuy.51zhuanfan.com%3Fc%3D\" + channel\n  + \"&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect\";\n\n\nvar login = function () {\n  window.location.href = url;\n};\n\nvar init = function () {\n\n  if (code) {\n    post('/user/wx/login', {code: code, channel: channel}).then(res => {\n      //console.log('init',res)\n      let data = res.data.data\n      console.log('data',data)\n      // 存储到本地,用cookie加上前缀buy_h5_userid\n       Cookie.set('buy_h5_userid',data.userid,{ expires: 7 })\n       Cookie.set('buy_h5_token',data.token,{ expires: 7 })\n       Cookie.set('buy_h5_timestamp',data.timestamp,{ expires: 7 })\n       window.location.href = \"/\";\n    });\n  } else {\n    get('/user/info', {}).then(res => {\n      if (res.data.code === 600 || res.data.code === 700) {\n        // 重新登录\n        login();\n      }\n    });\n  }\n\n};\n\nvar initData = -1;\n\nvar setInitData = (b)=>{\n  initData = b;\n}\n\nvar checkInitData = ()=>{\n  return new Promise((resolve, reject) => {\n    var func = function(){\n      if(initData === 1){\n        resolve();\n      }\n      if(initData===-1){\n  setTimeout(() => {\n    func()\n  }, 10);\n      }\n      if(initData === 0){\n        reject();\n      }\n    }\n    func();\n    \n  });\n}\n\nexport default {\n  init,\n  setInitData,\n  checkInitData\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/module/login.js"],"sourceRoot":""}