webpackJsonp([8],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i=n("//Fk"),o=n.n(i),r=n("mtWM"),u=n.n(r),c=n("mw3O"),s=n.n(c),p=n("lbHh"),l=n.n(p),d="http://47.96.17.80:9400/h5",h=function(e,t){t=t||{};var n=l.a.get("buy_h5_userid"),a=l.a.get("buy_h5_timestamp"),i=l.a.get("buy_h5_token");return n&&a&&i&&(t._userid=n,t._timestamp=a,t._token=i),t._h5=1,new o.a(function(n,a){u.a.post(d+e,s.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){n(e)}).catch(function(e){a(e)})})},m=function(e,t){t=t||{};var n=l.a.get("buy_h5_userid"),a=l.a.get("buy_h5_timestamp"),i=l.a.get("buy_h5_token");return n&&a&&i&&(t._userid=n,t._timestamp=a,t._token=i),t._h5=1,new o.a(function(n,a){u.a.get(d+e,{params:t}).then(function(e){n(e)}).catch(function(e){a(e)})})};function f(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):""}var _=f("c"),v=f("code"),g="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf9fbb515384aa6c0&redirect_uri=http%3A%2F%2Fbuy.51zhuanfan.com%3Fc%3D"+_+"&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect",b=function(){v?h("/user/wx/login",{code:v,channel:_}).then(function(e){var t=e.data.data;console.log("data",t),l.a.set("buy_h5_userid",t.userid,{expires:7}),l.a.set("buy_h5_token",t.token,{expires:7}),l.a.set("buy_h5_timestamp",t.timestamp,{expires:7}),window.location.href="/"}):m("/user/info",{}).then(function(e){600!==e.data.code&&700!==e.data.code||(window.location.href=g)})},w={name:"App",methods:{initView:function(){var e=this;this.$get("/init").then(function(t){if(console.log("init",t),200===t.data.code){var n=JSON.parse(t.data.data.text);e.$store.commit("addTextList",n),e.$store.commit("addBanner",t.data.data.bannerTopList),e.$store.commit("addInvite",t.data.data.invite),t.data.data.invite||e.$router.push("/invite")}})}},mounted:function(){b(),this.initView()}},y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("keep-alive",[this.$route.meta.keepAlive?t("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():t("router-view")],1)},staticRenderFns:[]};var x=n("VU/8")(w,y,!1,function(e){n("gTC2")},null,null).exports,k=n("/ocq");a.a.use(k.a);var T=new k.a({routes:[{path:"/",name:"Home",meta:{keepAlive:!0},component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"FP3a"))}},{path:"/rule",name:"Rule",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"hI2a"))}},{path:"/order",name:"Rule",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"0wiy"))}},{path:"/refund",name:"Rule",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"0Jzp"))}},{path:"/cart",name:"Cart",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"qJko"))}},{path:"/invite",name:"Invite",component:function(){return n.e(2).then(n.bind(null,"6LbQ"))}}]}),L=n("NYxO");a.a.use(L.a);var M=new L.a.Store({state:{cartCount:0,scrollTop:0,indexList:[],ruleList:[],bindList:[],bannerTopList:[],invite:null},mutations:{addCartCount:function(e,t){e.cartCount=t},addTextList:function(e,t){e.indexList=t.index_list,e.ruleList=t.rule_list,e.bindList=t.bind_list},addBanner:function(e,t){e.bannerTopList=t},addInvite:function(e,t){e.invite=t}}}),A=n("fxnj"),S=n.n(A),$=function(e,t){var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];var a=Math.floor((new Date).getTime()/1e3),i=function(e){for(var t="",a=0;a<e;a++){var i=Math.ceil(35*Math.random());t+=n[i]}return t}(16),o="http://buy.51zhuanfan.com";e("http://47.96.17.80:9400/h5/wx/config",{timestamp:a,nonceStr:i,url:location.href.split("#")[0]}).then(function(e){var n=e.data.data.appId,r=e.data.data.signature;t.config({debug:!1,appId:n+"",timestamp:a+"",nonceStr:i+"",signature:r+"",jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),t.error(function(e){console.log("验证失败：",e)}),t.ready(function(){var e="http://dl.buy.51zhuanfan.com/res/img/share-20180816.jpg";t.onMenuShareTimeline({title:"双十一翻海购",desc:"余欢",link:o,imgUrl:e,success:function(){},cancel:function(){}}),t.onMenuShareAppMessage({title:"双十一翻海购",desc:"余欢",link:o,imgUrl:e,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),t.onMenuShareQQ({title:"双十一翻海购",desc:"余欢",link:o,imgUrl:e,success:function(){},cancel:function(){}})})})},C=n("bqTm"),Q=n.n(C),P=n("7QTg"),q=n.n(P),F=(n("v2ns"),n("muQq"),n("e195"),n("1BT9")),I=n.n(F);a.a.use(q.a),a.a.use(Q.a),a.a.use(I.a),a.a.prototype.$get=m,a.a.prototype.$post=h,a.a.prototype.get2=function(e,t){return t._h5=1,new o.a(function(n,a){u.a.get(e,{params:t}).then(function(e){n(e)}).catch(function(e){a(e)})})},a.a.prototype.wx=S.a,a.a.prototype.share=$,a.a.config.productionTip=!1,new a.a({el:"#app",router:T,store:M,components:{App:x},template:"<App/>"})},e195:function(e,t){},gTC2:function(e,t){},muQq:function(e,t){},v2ns:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.631c9508ffe571744b72.js.map