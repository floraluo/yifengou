webpackJsonp([8],{NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("7+uW"),i=t("//Fk"),o=t.n(i),r=t("mtWM"),u=t.n(r),c=t("mw3O"),s=t.n(c),p=t("lbHh"),l=t.n(p),d="http://47.96.17.80:9400/h5",h=function(e,n){n=n||{};var t=l.a.get("buy_h5_userid"),a=l.a.get("buy_h5_timestamp"),i=l.a.get("buy_h5_token");return t&&a&&i&&(n._userid=t,n._timestamp=a,n._token=i),n._h5=1,new o.a(function(t,a){u.a.post(d+e,s.a.stringify(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t(e)}).catch(function(e){a(e)})})},m=function(e,n){n=n||{};var t=l.a.get("buy_h5_userid"),a=l.a.get("buy_h5_timestamp"),i=l.a.get("buy_h5_token");return t&&a&&i&&(n._userid=t,n._timestamp=a,n._token=i),n._h5=1,new o.a(function(t,a){u.a.get(d+e,{params:n}).then(function(e){t(e)}).catch(function(e){a(e)})})};function f(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(n);return null!=t?unescape(t[2]):""}var _=f("c"),v=f("code"),b="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf9fbb515384aa6c0&redirect_uri=http%3A%2F%2Fbuy.51zhuanfan.com%3Fc%3D"+_+"&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect",g=function(){v?h("/user/wx/login",{code:v,channel:_}).then(function(e){var n=e.data.data;console.log("data",n),l.a.set("buy_h5_userid",n.userid,{expires:7}),l.a.set("buy_h5_token",n.token,{expires:7}),l.a.set("buy_h5_timestamp",n.timestamp,{expires:7}),window.location.href="/"}):m("/user/info",{}).then(function(e){600!==e.data.code&&700!==e.data.code||(window.location.href=b)})},w={name:"App",methods:{initView:function(){var e=this;this.$get("/init").then(function(n){if(console.log("init",n),200===n.data.code){var t=JSON.parse(n.data.data.text);e.$store.commit("addTextList",t),e.$store.commit("addBanner",n.data.data.bannerTopList),e.$store.commit("addInvite",n.data.data.invite),n.data.data.invite||e.$router.push("/invite")}})}},mounted:function(){g(),this.initView()}},y={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():n("router-view")],1)},staticRenderFns:[]};var x=t("VU/8")(w,y,!1,function(e){t("gTC2")},null,null).exports,k=t("/ocq");a.a.use(k.a);var T=new k.a({routes:[{path:"/",name:"Home",meta:{keepAlive:!0},component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"FP3a"))}},{path:"/rule",name:"Rule",component:function(){return Promise.all([t.e(0),t.e(6)]).then(t.bind(null,"hI2a"))}},{path:"/order",name:"Rule",component:function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,"0wiy"))}},{path:"/refund",name:"Rule",component:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,"0Jzp"))}},{path:"/cart",name:"Cart",component:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,"qJko"))}},{path:"/invite",name:"Invite",component:function(){return t.e(2).then(t.bind(null,"6LbQ"))}}]}),L=t("NYxO");a.a.use(L.a);var M=new L.a.Store({state:{cartCount:0,scrollTop:0,indexList:[],ruleList:[],bindList:[],bannerTopList:[],invite:null},mutations:{addCartCount:function(e,n){e.cartCount=n},addTextList:function(e,n){e.indexList=n.index_list,e.ruleList=n.rule_list,e.bindList=n.bind_list},addBanner:function(e,n){e.bannerTopList=n},addInvite:function(e,n){e.invite=n}}}),A=t("fxnj"),S=t.n(A),$=function(e,n){var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];var a=Math.floor((new Date).getTime()/1e3),i=function(e){for(var n="",a=0;a<e;a++){var i=Math.ceil(35*Math.random());n+=t[i]}return n}(16),o="http://buy.51zhuanfan.com";e("http://47.96.17.80:9400/h5/wx/config",{timestamp:a,nonceStr:i,url:location.href.split("#")[0]}).then(function(e){var t=e.data.data.appId,r=e.data.data.signature;n.config({debug:!1,appId:t+"",timestamp:a+"",nonceStr:i+"",signature:r+"",jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),n.error(function(e){console.log("验证失败：",e)}),n.ready(function(){var e="http://dl.buy.51zhuanfan.com/res/20181025/image/banner.png";n.onMenuShareTimeline({title:"点我优惠购",desc:"双十一嗨翻",link:o,imgUrl:e,success:function(){},cancel:function(){}}),n.onMenuShareAppMessage({title:"点我优惠购",desc:"双十一嗨翻",link:o,imgUrl:e,type:"link",dataUrl:"",success:function(){},cancel:function(){}}),n.onMenuShareQQ({title:"点我优惠购",desc:"双十一嗨翻",link:o,imgUrl:e,success:function(){},cancel:function(){}})})})},C=t("bqTm"),Q=t.n(C),P=t("7QTg"),q=t.n(P),F=(t("v2ns"),t("muQq"),t("e195"),t("1BT9")),I=t.n(F);a.a.use(q.a),a.a.use(Q.a),a.a.use(I.a),a.a.prototype.$get=m,a.a.prototype.$post=h,a.a.prototype.get2=function(e,n){return n._h5=1,new o.a(function(t,a){u.a.get(e,{params:n}).then(function(e){t(e)}).catch(function(e){a(e)})})},a.a.prototype.wx=S.a,a.a.prototype.share=$,a.a.config.productionTip=!1,new a.a({el:"#app",router:T,store:M,components:{App:x},template:"<App/>"})},e195:function(e,n){},gTC2:function(e,n){},muQq:function(e,n){},v2ns:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.24aecd4164686d810a2e.js.map